---
import { actions } from "astro:actions";
import AdminLayout from "../../../layouts/AdminLayout.astro";
import { GrammarPointsTable } from "~/features/grammar-point/GrammarPointsTable";

const { data: grammarPointsList, error } = await Astro.callAction(
  actions.getAllGrammarPoints,
  undefined,
);

if (!grammarPointsList) {
  throw new Error(`Failed to load grammar points, ${error}`);
}
---

<AdminLayout
  title="Grammar Points"
  action={{ label: "Create", href: "./grammar/create" }}
  description="See all grammar points and create new ones."
>
  <GrammarPointsTable grammarPoints={grammarPointsList} client:load />
</AdminLayout>
