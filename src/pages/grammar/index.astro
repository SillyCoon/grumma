---
import { GET as fetchGpInReview } from "@api/sr/review/list";
import { fetchComingSoonList, fetchGrammarList } from "grammar-sdk";
import { Grammar } from "../../components/solid/grammar/Grammar";
import Layout from "../../layouts/Layout.astro";

const grammar = await fetchGrammarList();
const comingSoon = await fetchComingSoonList();
const inReview = (await (await fetchGpInReview(Astro)).json()) as string[];
const maybeMode = Astro.url.searchParams.get("mode");
const mode = maybeMode === "cram" ? "cram" : "nav";
---

<Layout title="Grammar" topPadding={false} transition:persist>
  <Grammar
    client:load
    grammar={[...grammar, ...comingSoon]}
    inReview={inReview}
    mode={mode}
  />
</Layout>
